<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Language Certificate - EduLang Hub</title>
  <!-- Preconnect to Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Load fonts with display=swap for better performance -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Mr+De+Haviland&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Alex+Brush&display=swap" rel="stylesheet">
  <style>
    /* Basic Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    /* Body Styles */
    body {
      font-family: 'Times New Roman', Georgia, serif;
      background: linear-gradient(135deg, #f8f0d8 0%, #e6d9b2 100%);
      color: #333;
      line-height: 1.6;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjZmZmIj48L3JlY3Q+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNmMGYwZjAiPjwvcmVjdD4KPC9zdmc+');
      opacity: 0.8;
      z-index: -1;
    }
    
    /* Form Styles */
    .form-container {
      background: white;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      max-width: 500px;
      width: 100%;
      margin: 50px auto;
      text-align: center;
      border: 2px solid #daa520;
      display: block; /* Ensure form is visible by default */
    }
    
    .photo-input {
      margin-bottom: 10px;
    }
    
    .photo-preview {
      width: 150px;
      height: 150px;
      margin: 10px auto;
      border: 3px solid #daa520;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
    }
    
    .photo-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    h1 {
      color: #daa520;
      margin-bottom: 20px;
      font-family: 'Cinzel', serif;
      font-weight: 900;
    }
    
    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #0D47A1;
    }
    
    input {
      width: 100%;
      padding: 10px;
      border: 1px solid #1E88E5;
      border-radius: 5px;
      font-size: 16px;
    }
    
    .btn-generate {
      background: linear-gradient(to right, #1E88E5, #64B5F6);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      margin-top: 10px;
    }
    
    .btn-generate:hover {
      background: linear-gradient(to right, #0D47A1, #1E88E5);
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(30, 136, 229, 0.3);
    }
    
    /* Certificate Styles */
    .certificate-container {
      display: none; /* Hidden until generated */
      width: 100%;
      max-width: 1000px;
      margin: 20px auto;
    }
    
    .certificate-frame {
      background: linear-gradient(135deg, #f5e7c1 0%, #e6c86e 50%, #daa520 100%);
      border: 15px solid #b8860b;
      border-radius: 30px;
      padding: 20px;
      position: relative;
      box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.15),
        0 0 0 2px #fff,
        0 0 0 15px #daa520,
        0 0 0 16px #b8860b,
        0 0 0 18px #daa520,
        0 0 0 19px #fff,
        0 0 40px rgba(184, 134, 11, 0.4);
      overflow: hidden;
      animation: certificateGlow 3s ease-in-out infinite alternate;
    }
    
    @keyframes certificateGlow {
      0% {
        box-shadow: 
          0 10px 30px rgba(0, 0, 0, 0.15),
          0 0 0 2px #fff,
          0 0 0 15px #daa520,
          0 0 0 16px #b8860b,
          0 0 0 18px #daa520,
          0 0 0 19px #fff,
          0 0 40px rgba(184, 134, 11, 0.4);
      }
      100% {
        box-shadow: 
          0 10px 30px rgba(0, 0, 0, 0.2),
          0 0 0 2px #fff,
          0 0 0 15px #daa520,
          0 0 0 16px #b8860b,
          0 0 0 18px #daa520,
          0 0 0 19px #fff,
          0 0 60px rgba(184, 134, 11, 0.7);
      }
    }
    
    .certificate-frame::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 50% 50%, rgba(30, 136, 229, 0.05) 0%, transparent 70%),
        radial-gradient(circle at 80% 20%, rgba(30, 136, 229, 0.1) 0%, transparent 50%),
        url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDMwLCAxMzYsIDIyOSwgMC4xKSIgc3Ryb2tlLXdpZHRoPSIzIiBkPSJNMjAsMjAgQzQwLDEwIDYwLDEwIDgwLDIwIEM5MCw0MCA5MCw2MCA4MCw4MCBDNjAsOTAgNDAsOTAgMjAsODAgQzEwLDYwIDEwLDQwIDIwLDIwIFoiPjwvcGF0aD48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMzAsIDEzNiwgMjI5LCAwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjAsMjAgQzQwLDEwIDYwLDEwIDgwLDIwIEM5MCw0MCA5MCw2MCA4MCw4MCBDNjAsOTAgNDAsOTAgMjAsODAgQzEwLDYwIDEwLDQwIDIwLDIwIFoiPjwvcGF0aD48L3N2Zz4=');
      opacity: 0.7;
      z-index: 0;
    }
    
    .certificate-content {
      position: relative;
      z-index: 1;
      padding: 40px;
      border: 2px solid rgba(184, 134, 11, 0.5);
      background: linear-gradient(to bottom, rgba(255,255,255,0.9) 0%, rgba(245, 231, 193, 0.9) 100%);
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 20px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 0 30px rgba(184, 134, 11, 0.2);
    }
    
    .certificate-content::before,
    .certificate-content::after {
      content: '';
      position: absolute;
      width: 200px;
      height: 200px;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjAwIDIwMCI+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDMwLCAxMzYsIDIyOSwgMC4xKSIgc3Ryb2tlLXdpZHRoPSIzIiBkPSJNMjAsMjAgQzQwLDEwIDYwLDEwIDgwLDIwIEM5MCw0MCA5MCw2MCA4MCw4MCBDNjAsOTAgNDAsOTAgMjAsODAgQzEwLDYwIDEwLDQwIDIwLDIwIFoiPjwvcGF0aD48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMzAsIDEzNiwgMjI5LCAwLjA1KSIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNMjAsMjAgQzQwLDEwIDYwLDEwIDgwLDIwIEM5MCw0MCA5MCw2MCA4MCw4MCBDNjAsOTAgNDAsOTAgMjAsODAgQzEwLDYwIDEwLDQwIDIwLDIwIFoiPjwvcGF0aD48L3N2Zz4=');
      opacity: 0.5;
      z-index: -1;
    }
    
    .certificate-content::before {
      top: -50px;
      left: -50px;
    }
    
    .certificate-content::after {
      bottom: -50px;
      right: -50px;
      transform: rotate(180deg);
    }
    
    /* Certificate Header */
    .certificate-header {
      text-align: center;
      margin-bottom: 20px;
      position: relative;
    }
    
    /* Logo styles removed */
    
    .certificate-title {
      font-size: 48px;
      color: #b8860b;
      margin: 20px 0 40px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 4px;
      background: linear-gradient(to right, #b8860b, #daa520, #ffd700);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 
        0px 2px 2px rgba(255, 255, 255, 0.5),
        0px 4px 4px rgba(0, 0, 0, 0.05);
      text-align: center;
      position: relative;
      animation: titleShimmer 5s linear infinite;
      font-family: 'Cinzel', serif;
    }
    
    .certificate-title::before,
    .certificate-title::after {
      content: '';
      position: absolute;
      height: 3px;
      background: linear-gradient(to right, transparent, #daa520, transparent);
      width: 60%;
      left: 20%;
    }
    
    .certificate-title::before {
      top: -15px;
    }
    
    .certificate-title::after {
      bottom: -15px;
    }
    
    /* Certificate Body */
    .certificate-body {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
    }
    
    .certificate-name {
      font-family: 'Cinzel', serif;
      font-size: 42px;
      margin: 30px 0;
      font-weight: 900;
      color: #b8860b;
      position: relative;
      display: inline-block;
      padding: 0 40px;
      background: linear-gradient(to right, #b8860b, #daa520, #b8860b);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 200% auto;
      animation: nameShine 3s ease-in-out infinite alternate;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      letter-spacing: 2px;
      text-transform: uppercase;
      border-bottom: 2px solid rgba(184, 134, 11, 0.3);
      padding-bottom: 5px;
    }
    
    .certificate-name::before,
    .certificate-name::after {
      content: '✧';
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 28px;
      color: #daa520;
      text-shadow: 0 0 5px rgba(218, 165, 32, 0.3);
    }
    
    .certificate-name::before {
      left: 0;
    }
    
    .certificate-name::after {
      right: 0;
    }
    
    .certificate-description {
      font-size: 18px;
      margin-bottom: 30px;
      max-width: 80%;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.8;
      color: #555;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(30, 136, 229, 0.1);
      position: relative;
      border: 1px solid rgba(30, 136, 229, 0.2);
    }
    
    /* Certificate Photo */
    .certificate-photo {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border: 5px solid #1E88E5;
      border-radius: 5px;
      margin: 20px auto;
      display: block;
      box-shadow: 0 5px 15px rgba(30, 136, 229, 0.2);
    }
    
    /* Certificate Details */
    .certificate-details {
      display: flex;
      justify-content: space-between;
      margin: 40px 0;
      padding: 20px;
      border: 1px solid rgba(30, 136, 229, 0.3);
      background: rgba(255, 255, 255, 0.5);
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(30, 136, 229, 0.1);
    }
    
    .detail-item {
      text-align: center;
      flex: 1;
      padding: 0 15px;
    }
    
    .detail-label {
      font-size: 14px;
      color: #0D47A1;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .detail-value {
      font-size: 18px;
      font-weight: bold;
      color: #1E88E5;
    }
    
    /* Certificate Footer */
    .certificate-footer {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px dashed rgba(30, 136, 229, 0.3);
      background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(232, 245, 254, 0.5));
      padding: 20px;
      border-radius: 0 0 8px 8px;
      position: relative;
    }
    
    .certificate-signature {
      text-align: center;
      flex: 1;
      position: relative;
      padding: 10px 20px;
    }
    
    .signature-line {
      width: 240px;
      height: 1px;
      background: rgba(0, 0, 0, 0.3);
      margin: 15px auto 5px;
      position: relative;
    }
    
    .signature-line::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 1px;
      background: rgba(0, 0, 0, 0.1);
      bottom: 2px;
      left: 0;
    }
    
    .signature-name {
      font-weight: normal;
      font-size: 38px;
      color: #000000;
      margin-top: 5px;
      font-family: 'Mr De Haviland', cursive !important;
      letter-spacing: 0;
      text-transform: none;
      text-shadow: none;
      line-height: 1;
      transform: rotate(-5deg);
      position: relative;
      display: inline-block;
      margin-bottom: 5px;
    }
    
    .signature-name::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 2px;
      background: rgba(0, 0, 0, 0.1);
      bottom: -2px;
      left: 0;
    }
    
    .signature-title {
      font-size: 12px;
      color: #333333;
      font-style: normal;
      font-family: 'Times New Roman', serif;
      letter-spacing: 1px;
      margin-top: 15px;
      text-transform: uppercase;
      font-weight: bold;
    }
    
    /* Professional stamp with name and stars */
    .certificate-stamp {
      position: absolute;
      top: 180px;
      right: 80px;
      transform: rotate(15deg);
      width: 180px;
      height: 180px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 4px solid rgba(139, 0, 0, 0.6);
      border-radius: 50%;
      background: rgba(139, 0, 0, 0.05);
      box-shadow: 
        0 0 15px rgba(139, 0, 0, 0.3),
        inset 0 0 30px rgba(139, 0, 0, 0.2);
      z-index: 10;
      opacity: 0.6;
      background-image: 
        radial-gradient(circle at center, rgba(255,255,255,0.9) 0%, rgba(139, 0, 0, 0.05) 70%),
        repeating-radial-gradient(circle at center, transparent 0px, transparent 10px, rgba(139, 0, 0, 0.05) 10px, rgba(139, 0, 0, 0.05) 12px);
      animation: stampPulse 4s ease-in-out infinite alternate;
      pointer-events: none; /* Ensure stamp doesn't interfere with interactions */
    }
    
    @keyframes stampPulse {
      0% {
        transform: rotate(15deg) scale(1);
        opacity: 0.6;
        box-shadow: 
          0 0 15px rgba(139, 0, 0, 0.3),
          inset 0 0 30px rgba(139, 0, 0, 0.2);
      }
      100% {
        transform: rotate(15deg) scale(1.02);
        opacity: 0.65;
        box-shadow: 
          0 0 25px rgba(139, 0, 0, 0.4),
          inset 0 0 40px rgba(139, 0, 0, 0.25);
      }
    }
    
    .certificate-stamp::before {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      border: 2px dashed #8b0000;
      border-radius: 50%;
      opacity: 0.8;
      animation: rotate 60s linear infinite;
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .certificate-stamp::after {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      border: 1px solid #8b0000;
      border-radius: 50%;
      opacity: 0.6;
      animation: rotate 80s linear infinite reverse;
    }
    
    /* Add ink texture to stamp */
    .certificate-stamp-ink {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 50%;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgMjAwIDIwMCI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9Im5vbmUiLz48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9Ijk4IiBmaWxsPSJub25lIiBzdHJva2U9IiM4YjAwMDAiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWRhc2hhcnJheT0iMTAgNSIvPjwvc3ZnPg==');
      opacity: 0.3;
      mix-blend-mode: multiply;
      pointer-events: none;
      animation: stampFade 3s ease-in-out infinite alternate;
    }
    
    @keyframes stampFade {
      0% { opacity: 0.2; }
      100% { opacity: 0.4; }
    }
    
    .stamp-content {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .stamp-stars {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .stamp-star {
      position: absolute;
      color: #8b0000;
      font-size: 20px;
      text-shadow: 0 0 5px rgba(139, 0, 0, 0.6);
      font-weight: bold;
      animation: starTwinkle 3s ease-in-out infinite;
    }
    
    @keyframes starTwinkle {
      0%, 100% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.2); opacity: 1; }
    }
    
    .stamp-star:nth-child(1) { top: 15px; left: 50%; transform: translateX(-50%); }
    .stamp-star:nth-child(2) { top: 50%; right: 15px; transform: translateY(-50%); }
    .stamp-star:nth-child(3) { bottom: 15px; left: 50%; transform: translateX(-50%); }
    .stamp-star:nth-child(4) { top: 50%; left: 15px; transform: translateY(-50%); }
    .stamp-star:nth-child(5) { top: 25px; right: 25px; }
    .stamp-star:nth-child(6) { bottom: 25px; right: 25px; }
    .stamp-star:nth-child(7) { bottom: 25px; left: 25px; }
    .stamp-star:nth-child(8) { top: 25px; left: 25px; }
    
    .stamp-text {
      text-align: center;
      z-index: 2;
    }
    
    .stamp-name {
      font-family: 'Cinzel', serif;
      font-weight: 900;
      font-size: 16px;
      color: #8b0000;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 2px;
      text-shadow: 0 1px 1px rgba(0,0,0,0.3);
      background: linear-gradient(to bottom, #8b0000, #5c0000);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      line-height: 1.2;
      filter: drop-shadow(0 1px 1px rgba(255,255,255,0.5));
    }
    
    .stamp-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: bold;
      margin-top: 3px;
      background: #8b0000;
      color: white;
      padding: 2px 10px;
      border-radius: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
      text-shadow: 0 1px 1px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.3);
    }
    
    .stamp-date {
      font-size: 10px;
      color: #8b0000;
      margin-top: 5px;
      font-weight: bold;
      text-shadow: 0 1px 1px rgba(255,255,255,0.5);
    }
    
    .stamp-border {
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      height: 1px;
      background: #8b0000;
      opacity: 0.5;
      box-shadow: 0 0 3px rgba(139, 0, 0, 0.5);
    }
    
    .stamp-border-vertical {
      position: absolute;
      top: 0;
      left: 50%;
      width: 1px;
      height: 100%;
      background: #8b0000;
      opacity: 0.5;
      box-shadow: 0 0 3px rgba(139, 0, 0, 0.5);
    }
    
    /* Certificate QR Code Section */
    .certificate-qr-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    
    /* Certificate QR Code */
    .certificate-qr {
      width: 120px;
      height: 120px;
      background: white;
      padding: 8px;
      border: 3px solid #b8860b;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.15);
      position: relative;
      overflow: hidden;
      margin-bottom: 10px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .certificate-qr:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(184, 134, 11, 0.3);
    }
    
    .certificate-qr::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 50%, rgba(255,255,255,0.3) 100%);
      pointer-events: none;
    }
    
    .certificate-qr img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      image-rendering: -webkit-optimize-contrast; /* For better QR code clarity */
    }
    
    /* Certificate ID Section */
    .certificate-id-section {
      text-align: center;
      margin-top: 5px;
    }
    
    .id-label {
      font-size: 14px;
      color: #b8860b;
      margin-bottom: 5px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Arial', sans-serif;
    }
    
    .id-value {
      font-size: 16px;
      font-weight: bold;
      color: #b8860b;
      font-family: 'Courier New', monospace;
      letter-spacing: 1.5px;
      background: linear-gradient(to right, #b8860b, #daa520, #b8860b);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      padding: 4px 8px;
      border-radius: 4px;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
      animation: idGlow 2s ease-in-out infinite alternate;
      border: 1px solid rgba(184, 134, 11, 0.3);
      background-color: rgba(255, 255, 255, 0.8);
      display: inline-block;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .id-value:hover {
      transform: scale(1.05);
    }
    
    @keyframes idGlow {
      0% {
        text-shadow: 0 0 5px rgba(184, 134, 11, 0.3);
      }
      100% {
        text-shadow: 0 0 15px rgba(184, 134, 11, 0.7);
      }
    }
    
    /* Certificate Watermark */
    .certificate-watermark {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-30deg);
      font-size: 120px;
      color: rgba(30, 136, 229, 0.05);
      font-weight: bold;
      z-index: 0;
      pointer-events: none;
      white-space: nowrap;
      font-family: 'Cinzel', serif;
      letter-spacing: 5px;
      text-transform: uppercase;
    }
    
    /* Certificate Actions */
    .certificate-actions {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      gap: 20px;
      flex-wrap: wrap;
      padding: 10px;
    }
    
    .btn {
      padding: 12px 24px;
      background: linear-gradient(to right, #1E88E5, #64B5F6);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      z-index: 1;
      box-shadow: 0 4px 15px rgba(30, 136, 229, 0.3);
      margin: 0 5px;
      font-size: 16px;
      letter-spacing: 0.5px;
      min-width: 180px;
      text-transform: uppercase;
    }
    
    .btn:hover {
      background: linear-gradient(to right, #0D47A1, #1E88E5);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(30, 136, 229, 0.5);
    }
    
    .btn:before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
      transform: rotate(45deg);
      z-index: -1;
      transition: all 0.5s ease;
      animation: buttonShine 3s infinite linear;
    }
    
    @keyframes buttonShine {
      0% { left: -50%; }
      100% { left: 150%; }
    }
    
    @keyframes titleShimmer {
      0% {
        background-position: -500px 0;
      }
      100% {
        background-position: 500px 0;
      }
    }
    
    @keyframes nameShine {
      0% {
        background-position: left;
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      100% {
        background-position: right;
        text-shadow: 0 2px 8px rgba(0,0,0,0.2);
      }
    }
    

    
    /* Responsive Styles */
    @media (max-width: 768px) {
      .certificate-frame {
        padding: 10px;
        border-width: 10px;
      }
      
      .certificate-content {
        padding: 20px;
      }
      
      .certificate-title {
        font-size: 30px;
      }
      
      .certificate-name {
        font-size: 36px;
      }
      
      .certificate-description {
        font-size: 16px;
      }
      
      .certificate-details {
        flex-direction: column;
        gap: 15px;
      }
      
      .certificate-footer {
        flex-direction: column;
        align-items: center;
        gap: 20px;
      }
      
      .certificate-stamp {
        bottom: 40px;
        right: 40px;
        width: 100px;
        height: 100px;
      }
      
      .certificate-qr {
        width: 80px;
        height: 80px;
        bottom: 30px;
        left: 30px;
      }
    }
  </style>
</head>
<body>
  <!-- Form Container -->
  <div class="form-container" id="formContainer">
    <h1>English Language Certificate</h1>
    
    <div class="form-group">
      <label for="name">Your Name:</label>
      <input type="text" id="name" placeholder="Enter your full name" required>
    </div>

    
    <div class="form-group">
      <label for="photoUpload">Your Photo:</label>
      <input type="file" id="photoUpload" accept="image/*" class="photo-input">
      <div class="photo-preview" id="photoPreview">
        <img id="previewImage" src="https://via.placeholder.com/150" alt="Preview">
      </div>
    </div>

    <div class="form-info" style="margin-top: 15px; color: #0D47A1; font-weight: bold;">
      <p>Please enter your details and upload a photo to generate your certificate.</p>
      <p id="marksInfo"></p>
      <p id="validationMessage" style="color: #e53935; display: none;">Please fill in all required fields</p>
    </div>

    <button id="generateCertificate" class="btn-generate">Generate Certificate</button>
  </div>

  <!-- Certificate Container -->
  <div class="certificate-container" id="certificateContainer" style="display: none;">
    <div class="certificate-frame">
      <div class="certificate-content">
        <div class="certificate-watermark">CERTIFIED</div>
        <div class="certificate-header">
          <!-- Logo removed as requested -->
          <h1 class="certificate-title">Certificate of Achievement</h1>
          <div class="certificate-subtitle" style="font-size: 24px; color: #b8860b; margin-bottom: 20px; font-weight: bold; text-transform: uppercase; letter-spacing: 2px;">English Language Proficiency</div>
        </div>
        
        <div class="certificate-body">
          
          <div class="certificate-watermark">EDULANG HUB</div>
          <div class="certificate-name" id="certificateName" style="font-family: 'Cinzel', serif; font-weight: 900; letter-spacing: 2px;">STUDENT NAME</div>
          <div class="certificate-description">has successfully completed the <span style="font-weight: bold; color: #0D47A1;">English Language Proficiency Test</span> With distinction, demonstrating excellent language skills and a strong commitment to mastery.
          </div>

          
          <div class="certificate-stamp">
            <div class="certificate-stamp-ink" style="background-color: #ccc;"></div>
            <div class="stamp-content">
              <div class="stamp-stars">
                <div class="stamp-star">★</div>
                <div class="stamp-star">★</div>
                <div class="stamp-star">★</div>
                <div class="stamp-star">★</div>
                <div class="stamp-star">★</div>
                <div class="stamp-star">★</div>
                <div class="stamp-star">★</div>
                <div class="stamp-star">★</div>
              </div>
              <div class="stamp-border"></div>
              <div class="stamp-border-vertical"></div>
              <div class="stamp-text">
                <div class="stamp-name">Bilal Ahmad</div>
                <div class="stamp-name">EDULANG HUB</div>
                <div class="stamp-title">CERTIFIED</div>
                <div class="stamp-date" id="stampDate"></div>
              </div>
            </div>
          </div>
          
          <img src="https://via.placeholder.com/150" alt="Student Photo" class="certificate-photo" id="studentPhoto">
          
          <div class="certificate-details">
            <div class="detail-item">
              <div class="detail-label">SCORE</div>
              <div class="detail-value" id="scoreValue">95%</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">LEVEL</div>
              <div class="detail-value" id="levelValue">Advanced</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">DATE</div>
              <div class="detail-value" id="dateValue"></div>
            </div>
          </div>
          
          <div class="certificate-footer">
            <div class="certificate-signature">
              <div class="signature-line"></div>
              <div class="signature-name" style="font-family: 'Mr De Haviland', cursive !important; font-weight: normal; font-size: 38px; color: #000000;">Bilal Ahmad</div>
              <div class="signature-title">Director of Language Studies</div>
              <div style="margin-top: 15px; text-align: center;">
                <button onclick="window.open('file:///c:/Users/HASSAN%20COMPUTER/Desktop/New%20folder/verify-certificate.html', '_blank')" style="background: linear-gradient(to right, #b8860b, #daa520); color: white; border: none; padding: 8px 15px; border-radius: 5px; font-size: 12px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); margin-top: 10px;">
                  Verify Certificate at: https://khan-11-dot.github.io/edulang-hub/verify-certificate.html
                </button>
              </div>
            </div>

            <div class="certificate-verification">
              <div class="certificate-qr">
                <img id="certificateQR" src="" alt="Verification QR Code">
              </div>
              <div class="certificate-id">
                <div class="id-label">Certificate ID</div>
                <div class="id-value" id="idValue" onclick="window.open('file:///c:/Users/HASSAN%20COMPUTER/Desktop/New%20folder/verify-certificate.html?id=' + this.textContent, '_blank')"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="certificate-actions">
      <button class="btn" id="downloadBtn" style="background-color: #4CAF50; margin-right: 10px;">Download Certificate PDF</button>
      <button class="btn" id="backToTest">Back to Test</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <script>
    // Get DOM elements
    const formContainer = document.getElementById('formContainer');
    const certificateContainer = document.getElementById('certificateContainer');
    const generateButton = document.getElementById('generateCertificate');
    const nameInput = document.getElementById('name');
    const photoUpload = document.getElementById('photoUpload');
    const previewImage = document.getElementById('previewImage');
    const validationMessage = document.getElementById('validationMessage');
    
    // Get URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const marksFromUrl = urlParams.get('marks');
    
    // Certificate elements
    const certificateName = document.getElementById('certificateName');
    const dateValue = document.getElementById('dateValue');
    const idValue = document.getElementById('idValue');
    const stampDate = document.getElementById('stampDate');
    const studentPhoto = document.getElementById('studentPhoto');
    const scoreValue = document.getElementById('scoreValue');
    const certificateQR = document.getElementById('certificateQR');
    const marksInfo = document.getElementById('marksInfo');
    const levelValue = document.getElementById('levelValue');
    
    // Display marks info if available
    if (marksFromUrl) {
      marksInfo.textContent = `Your score: ${marksFromUrl} marks`;
    }
    
    // Generate unique certificate ID in the format required by the verification page
    function generateCertificateID() {
      const year = new Date().getFullYear();
      const randomDigits = Math.floor(10000 + Math.random() * 90000);
      return `EDU:${year}.${randomDigits}`;
    }
    
    // Format date
    const currentDate = new Date();
    const formattedDate = currentDate.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
    
    // Determine level based on marks
    function determineLevel(marks) {
      if (marks > 140) {
        return 'Advanced';
      } else if (marks > 50) {
        return 'Intermediate';
      } else {
        return 'Beginner';
      }
    }
    
    // Calculate percentage based on total marks
    function calculatePercentage(marks, totalMarks = 200) {
      const percentage = (marks / totalMarks) * 100;
      return Math.round(percentage) + '%';
    }
    
    // Handle photo upload preview
    photoUpload.addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          previewImage.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    });
    
    // Validate form
    function validateForm() {
      const name = nameInput.value.trim();
      
      if (!name) {
        validationMessage.style.display = 'block';
        return false;
      }
      
      validationMessage.style.display = 'none';
      return true;
    }
    
    // Function to generate and show certificate
    function generateAndShowCertificate() {
      // Always attach the download button event when showing the certificate
      attachDownloadBtnListener();
      // Always attach the download button event when showing the certificate
      attachDownloadBtnListener();
      // Validate form first
      if (!validateForm()) {
        return;
      }
      
      const name = nameInput.value.trim();
      
      // Use marks from URL or default
      const marks = parseInt(marksFromUrl) || 190; // Default high marks if not provided
      
      // Generate unique certificate ID
      const certificateID = generateCertificateID();
      
      // Generate QR code that contains just the certificate ID so it works with any scanner
      const qrCodeURL = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(certificateID)}&qzone=2&margin=2&format=svg`;
      
      // Add verification instructions
      const verificationInstructions = document.createElement('div');
      verificationInstructions.style.fontSize = '12px';
      verificationInstructions.style.color = '#b8860b';
      verificationInstructions.style.marginTop = '5px';
      verificationInstructions.style.textAlign = 'center';
      verificationInstructions.style.fontFamily = 'Arial, sans-serif';
      verificationInstructions.style.fontWeight = 'bold';
      verificationInstructions.innerHTML = 'Scan QR code to verify certificate<br><span style="font-size:10px;font-weight:normal;">Works with any QR scanner</span>';
      document.querySelector('.certificate-verification').appendChild(verificationInstructions);
      
      // Store certificate data in localStorage for verification
      const certData = {
        id: certificateID,
        name: name,
        date: formattedDate,
        course: 'English Language Proficiency',
        issuer: 'EduLang Hub',
        score: marks + ' marks',
        level: determineLevel(marks)
      };
      
      // Store in localStorage
      localStorage.setItem(certificateID, JSON.stringify(certData));
      
      // Make QR code clickable
      certificateQR.style.cursor = 'pointer';
      certificateQR.onclick = function() {
        window.open(`file:///c:/Users/HASSAN%20COMPUTER/Desktop/New%20folder/verify-certificate.html?id=${certificateID}`, '_blank');
      };
      
      // Update certificate with user data
      certificateName.textContent = name.toUpperCase();
      idValue.textContent = certificateID;
      scoreValue.textContent = calculatePercentage(marks);
      levelValue.textContent = determineLevel(marks);
      certificateQR.src = qrCodeURL;
      
      // Set date values
      dateValue.textContent = formattedDate;
      stampDate.textContent = formattedDate;
      
      // Update photo if uploaded
      if (previewImage.src && previewImage.src !== 'https://via.placeholder.com/150') {
        studentPhoto.src = previewImage.src;
      }
      
      // Show certificate
      formContainer.style.display = 'none';
      certificateContainer.style.display = 'block';
      
      console.log('Certificate generated with marks:', marks);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      // Show certificate when button is clicked
      generateButton.addEventListener('click', function() {
        if (validateForm()) {
          formContainer.style.display = 'none';
          certificateContainer.style.display = 'block';
          generateAndShowCertificate();
        }
      });

      // Back to test page
      document.getElementById('backToTest').addEventListener('click', function() {
        window.location.href = 'test_english.html';
      });

      // Add button to go back to form
      document.querySelector('.certificate-actions').innerHTML += `
        <button class="btn" id="backToForm">Edit Information</button>
      `;

      // Back to form
      document.getElementById('backToForm').addEventListener('click', function() {
        certificateContainer.style.display = 'none';
        formContainer.style.display = 'block';
      });
    }); // End DOMContentLoaded

    // --- ENSURE DOWNLOAD BUTTON ALWAYS WORKS ---
    function attachDownloadBtnListener() {
      const downloadBtn = document.getElementById('downloadBtn');
      // Remove previous listeners if any
      const newBtn = downloadBtn.cloneNode(true);
      downloadBtn.parentNode.replaceChild(newBtn, downloadBtn);
      newBtn.addEventListener('click', function() {
        // Disable the button during processing
        this.disabled = true;
        const actionsElement = document.querySelector('.certificate-actions');
        actionsElement.style.display = 'none';
        const certificateElement = document.querySelector('.certificate-container');

        // --- Remove gradient backgrounds for PDF rendering ---
        const certTitle = document.querySelector('.certificate-title');
        const certName = document.querySelector('.certificate-name');
        const oldTitleBg = certTitle.style.background;
        const oldTitleColor = certTitle.style.color;
        const oldNameBg = certName.style.background;
        const oldNameColor = certName.style.color;
        certTitle.style.background = 'none';
        certTitle.style.color = '#b8860b';
        certName.style.background = 'none';
        certName.style.color = '#b8860b';

        // --- Remove background from stamp-name for PDF ---
        const stampNames = document.querySelectorAll('.stamp-name');
        const oldStampStyles = [];
        stampNames.forEach(el => {
          oldStampStyles.push({
            bg: el.style.background,
            color: el.style.color,
            opacity: el.style.opacity
          });
          el.style.background = 'none';
          el.style.color = '#3D2022'; // ya jo bhi aapko chahiye
          el.style.opacity = '0.2'; // thoda madham
        });

        // --- Make entire stamp faint for PDF (watermark effect) ---
        const stampEl = document.querySelector('.certificate-stamp');
        const oldStampOpacity = stampEl.style.opacity;
        stampEl.style.opacity = '0.3';

        // --- Remove background from certificate ID for PDF ---
        const idValueElem = document.getElementById('idValue');
        const oldIdBg = idValueElem.style.background;
        const oldIdBgClip = idValueElem.style.backgroundClip;
        const oldIdWebkitBgClip = idValueElem.style.webkitBackgroundClip;
        const oldIdTextFill = idValueElem.style.webkitTextFillColor;
        const oldIdBgColor = idValueElem.style.backgroundColor;
        idValueElem.style.background = 'none';
        idValueElem.style.backgroundClip = 'border-box';
        idValueElem.style.webkitBackgroundClip = 'border-box';
        idValueElem.style.webkitTextFillColor = '#b8860b';
        idValueElem.style.backgroundColor = 'transparent';

        html2canvas(certificateElement, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#ffffff'
        }).then(function(canvas) {
          // Restore stamp opacity after PDF generation
          stampEl.style.opacity = oldStampOpacity;
          try {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('landscape', 'mm', 'a4');
            const imgData = canvas.toDataURL('image/jpeg', 1.0);
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = pdf.internal.pageSize.getHeight();
            const imgWidth = canvas.width;
            const imgHeight = canvas.height;
            const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);
            const imgX = (pdfWidth - imgWidth * ratio) / 2;
            const imgY = (pdfHeight - imgHeight * ratio) / 2;
            pdf.addImage(imgData, 'JPEG', imgX, imgY, imgWidth * ratio, imgHeight * ratio);
            pdf.save('English_Language_Certificate.pdf');
          } catch (error) {
            console.error('Error creating PDF:', error);
            // alert removed: do not show any popup to user
          }
          actionsElement.style.display = 'block';
          newBtn.disabled = false;
          newBtn.textContent = 'Download Certificate PDF';
          // Restore original styles after PDF
          certTitle.style.background = oldTitleBg;
          certTitle.style.color = oldTitleColor;
          certName.style.background = oldNameBg;
          certName.style.color = oldNameColor;
          stampNames.forEach((el, i) => {
            el.style.background = oldStampStyles[i].bg;
            el.style.color = oldStampStyles[i].color;
          });
          stampInk.style.opacity = oldStampInkOpacity;
        }).catch(function(error) {
          console.error('Error capturing certificate:', error);
          // alert removed: do not show any popup to user
          actionsElement.style.display = 'block';
          newBtn.disabled = false;
          newBtn.textContent = 'Download Certificate PDF';
          // Restore original styles after PDF
          certTitle.style.background = oldTitleBg;
          certTitle.style.color = oldTitleColor;
          certName.style.background = oldNameBg;
          certName.style.color = oldNameColor;
          stampNames.forEach((el, i) => {
            el.style.background = oldStampStyles[i].bg;
            el.style.color = oldStampStyles[i].color;
          });
          stampInk.style.opacity = oldStampInkOpacity;
        });
      });
    }
    </script>
</body>
</html>
